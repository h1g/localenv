#Домен верхнего уровня для генерации доменов локального окружения
tld_default: "localenv"

#Полное название проекта
project_name: "{{ project + '-' + repo_name }}"
#Директория для хранения сервисных файлов развертываемого проекта
service_dir: "{{ services_dir + '/' + project_name }}"
#Директория для хранения исходного кода развертываемого проекта
source_dir:  "{{ sources_dir + '/' +  project_name }}"
#Директория для хранения конфигурационных файлов развертываемого проекта
config_dir:  "{{ configs_dir + '/' +  project_name }}"

#Директория хранения примитивов сервисов docker-composer
services_primitives: "{{ playbook_dir + '/templates/primitives/' }}"

#Список всех вложенных файлов и деркторий в папке templates
templates_hier:  "{{ lookup('filetree',playbook_dir + '/templates/',wantlist=True)|reject('search','primitives')|list }}"
#Список вложенных файлов в папке templates
templates_files: "{{ templates_hier|selectattr('state','equalto','file')|map(attribute='path')|reject('search','.j2')|list }}"
#Список вложенных шаблонов в папке templates
templates_templates: "{{ templates_hier|selectattr('state','equalto','file')|map(attribute='path')|select('search','.j2')|list }}"
#Список вложенных папок в папке templates
templates_dirs:  "{{ templates_hier|selectattr('state','equalto','directory')|map(attribute='path')|list }}"

#Путь хранения репозитория с исходным кодом проекта
source_repo: "{{ git_server + project + '/' + repo_name + '.git' }}"
#Путь хранения репозитория с конфигурационными файлами
config_repo: "{{ git_server + project + '/configs/' + repo_name + '.git' }}"

#Образ для CLI контейнера по умолчанию
cli_image: "ubuntu:latest"

#Словарь для определения пробрасываемых сервисных портов
services_ports:
  redis: "6379"
  postgres: "5432"
  mysql: "3306"
  mongo: "27017"
  rabbit: "15672"
